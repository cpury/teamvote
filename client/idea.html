<template name="listIdeas">
  {{#if Template.subscriptionsReady}}
    {{> toolbar}}

    {{#if ideas.count}}
      <div class="panel-group idea-list" id="accordion">
        {{#with ideas}}
          {{#each ideas}}
            {{> idea}}
          {{/each}}
        {{/with}}
      </div>
    {{else}}
      {{> noIdeas}}
    {{/if}}
  {{else}}
    {{> spinner}}
  {{/if}}
</template>

<template name="noIdeas">
  <div class="text-center">
    <br />
    <br />
    <h1>No ideas yet!</h1>
    {{#if currentUser}}
      <h4>Share your ideas to start brainstorming!</h4>
    {{else}}
      <h4>Log in to start brainstorming!</h4>
    {{/if}}
  </div>
</template>

<template name="idea">
  <div id="panel-{{_id}}" class="panel panel-default">
    <div class="panel-heading">
      {{>ideaHeading}}
    </div>

    <div id="collapse-{{_id}}" class="panel-collapse collapse">
      {{>ideaContent}}
    </div>
  </div>
</template>

<template name="ideaHeading">
  <div class="row">
    <div class="cell col-xs-2 col-sm-1" style="text-align: center;">
      <button type="button" class="btn btn-{{#if ideaIsUpvoted this}}success{{else}}default{{/if}} upvote-idea">
        <i class="glyphicon glyphicon-circle-arrow-up"></i>
        {{upvoteCount}}
      </button>
    </div><!--

    --><div class="cell col-xs-9 col-sm-10">
      <h4 class="panel-title idea-heading">
        <a data-toggle="collapse" data-parent="#accordion" href="#collapse-{{_id}}">
          {{title}}
        </a>
      </h4>
    </div><!--

    --><div class="cell col-xs-1">
      <div class="btn-group pull-right btn-group-sm">
        {{#if canDeleteIdea this}}
          <button type="button" class="btn btn-default delete-idea"><i class="glyphicon glyphicon-trash"></i></button>
        {{/if}}
      </div>
    </div>
  </div>
</template>

<template name="ideaContent">
  <div class="panel-body">
    <div class="row">
      <div class="col-xs-8 col-sm-9 col-md-10">
        <p class="well idea-content-well idea-description">
          {{#if description}}
            {{description}}
          {{else}}
            <em>(No description given.)</em>
          {{/if}}
        </p>
      </div>
      <div class="col-xs-4 col-sm-3 col-md-2">
        <div class="pull-right idea-content-well alert alert-info">
          <em>Added {{livestamp createdAt}} by <b>{{authorName}}</b></em>
        </div>
      </div>
    </div>
    <div class="comments">
      <ul class="list-group">
        {{> newComment}}
        {{#each comments}}
          {{> comment}}
        {{/each}}
      </ul>
    </div>
  </div>
</template>
